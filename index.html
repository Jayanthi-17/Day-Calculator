<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Day Calculator</title>
</head>
<body>
  <div id="CalculatorContainer"></div>

  <script>
    // Create and inject scoped CSS
    const css = `
      #CalculatorContainer { 
        background: #f9f6ee;
        padding: 40px 0;
        min-height: 100vh;
        box-sizing: border-box;
      }
      
      #CalculatorContainer .dc-card { 
        background: #f9f6ee; 
        border-radius: 12px; 
        box-shadow: 0 2px 12px rgba(0,0,0,0.1); 
        padding: 30px 25px; 
        width: calc(100% - 20px); 
        max-width: 425px;
        margin: 0 auto;
        box-sizing: border-box;
      }
      
      #CalculatorContainer .dc-title { 
        font-size: 2.1rem; 
        color: #553a4d; 
        font-weight: bold; 
        margin-bottom: 30px; 
        letter-spacing: -1px;
      }
      
      #CalculatorContainer .dc-label { 
        color: #af6b35; 
        font-weight: 600; 
        font-size: 1.05rem; 
        margin-bottom: 8px; 
        display: block;
      }
      
      #CalculatorContainer .dc-daterow { 
        margin-bottom: 20px;
      }
      
      #CalculatorContainer .dc-row { 
        display: flex; 
        gap: 10px; 
        margin-bottom: 10px;
      }
      
      #CalculatorContainer .dc-dropdown { 
        padding: 12px 10px; 
        border: 1px solid #e6dfd0; 
        border-radius: 6px; 
        font-size: 1rem; 
        outline: none; 
        width: 100%; 
        background: #fff; 
        color: #222;
        box-sizing: border-box;
        height: 46px;
      }
      
      #CalculatorContainer .dc-dropdown:focus { 
        border-color: #af6b35;
      }
      
      #CalculatorContainer .dc-btns { 
        display: flex; 
        gap: 12px; 
        margin: 25px 0 15px 0;
      }
      
      #CalculatorContainer .dc-calc-btn { 
        background: #b43a22; 
        color: #fff; 
        font-weight: bold; 
        font-size: 1.1rem; 
        padding: 12px 0; 
        border: none; 
        border-radius: 6px; 
        width: 100%; 
        cursor: pointer; 
        transition: background 0.15s; 
      }
      
      #CalculatorContainer .dc-calc-btn:hover { 
        background: #98301e; 
      }
      
      #CalculatorContainer .dc-reset-btn { 
        background: #dfcda7; 
        color: #885b23; 
        font-weight: bold; 
        font-size: 1.1rem; 
        padding: 12px 0; 
        border: none; 
        border-radius: 6px; 
        width: 100%; 
        cursor: pointer; 
        transition: background 0.15s;
      }
      
      #CalculatorContainer .dc-reset-btn:hover { 
        background: #e8e0c5; 
      }
      
      #CalculatorContainer .dc-error { 
        color: #b43a22; 
        background: #fff5ef; 
        padding: 12px 15px; 
        border-radius: 6px; 
        font-weight: bold; 
        margin-bottom: 15px;
        font-size: 0.95rem;
      }
      
      #CalculatorContainer .dc-results { 
        background: #fff; 
        padding: 18px 20px 16px; 
        border-radius: 8px; 
        border: 1px solid #eee4c9; 
        margin-top: 15px;
      }
      
      #CalculatorContainer .dc-results .dc-reslabel { 
        color: #b43a22; 
        font-weight: bold; 
        margin-bottom: 12px; 
        font-size: 1.1rem;
        line-height: 1.4;
      }
      
      #CalculatorContainer .dc-units { 
        display: flex; 
        gap: 10px; 
        flex-wrap: wrap; 
        margin-top: 10px;
      }
      
      #CalculatorContainer .dc-unit { 
        background: #f0ece5; 
        padding: 10px 15px; 
        border-radius: 5px; 
        font-size: 1rem; 
        color: #3a3030;
        flex-grow: 1;
        text-align: center;
      }

      /* Mobile-specific styles */
      @media (max-width: 600px) {
        #CalculatorContainer {
          padding: 20px 0;
        }
        
        #CalculatorContainer .dc-card {
          padding: 25px 15px;
          width: calc(100% - 30px);
        }
        
        #CalculatorContainer .dc-title {
          font-size: 1.8rem;
          margin-bottom: 25px;
        }
        
        #CalculatorContainer .dc-row {
          flex-direction: column;
          gap: 8px;
        }
        
        #CalculatorContainer .dc-dropdown {
          height: 50px;
          font-size: 1.05rem;
        }
        
        #CalculatorContainer .dc-btns {
          flex-direction: column;
          gap: 10px;
        }
        
        #CalculatorContainer .dc-unit {
          min-width: calc(50% - 15px);
        }
      }

      @media (max-width: 400px) {
        #CalculatorContainer .dc-card {
          padding: 20px 12px;
        }
        
        #CalculatorContainer .dc-title {
          font-size: 1.6rem;
        }
        
        #CalculatorContainer .dc-unit {
          min-width: 100%;
        }
      }
    `;

    const style = document.createElement('style');
    style.innerHTML = css;
    document.head.appendChild(style);

    // Create and inject HTML
    const html = `
      <div class="dc-card">
        <h1 class="dc-title">Day Calculator</h1>
        <div class="dc-daterow">
          <label class="dc-label">Start Date</label>
          <div class="dc-row">
            <select class="dc-dropdown" id="start-month">
              <option value="">Month</option>
              <option value="1">January</option>
              <option value="2">February</option>
              <option value="3">March</option>
              <option value="4">April</option>
              <option value="5">May</option>
              <option value="6">June</option>
              <option value="7">July</option>
              <option value="8">August</option>
              <option value="9">September</option>
              <option value="10">October</option>
              <option value="11">November</option>
              <option value="12">December</option>
            </select>
            <select class="dc-dropdown" id="start-day">
              <option value="">Day</option>
            </select>
            <select class="dc-dropdown" id="start-year">
              <option value="">Year</option>
            </select>
          </div>
        </div>
        <div class="dc-daterow">
          <label class="dc-label">End Date</label>
          <div class="dc-row">
            <select class="dc-dropdown" id="end-month">
              <option value="">Month</option>
              <option value="1">January</option>
              <option value="2">February</option>
              <option value="3">March</option>
              <option value="4">April</option>
              <option value="5">May</option>
              <option value="6">June</option>
              <option value="7">July</option>
              <option value="8">August</option>
              <option value="9">September</option>
              <option value="10">October</option>
              <option value="11">November</option>
              <option value="12">December</option>
            </select>
            <select class="dc-dropdown" id="end-day">
              <option value="">Day</option>
            </select>
            <select class="dc-dropdown" id="end-year">
              <option value="">Year</option>
            </select>
          </div>
        </div>
        <div id="dc-error" class="dc-error" style="display:none;"></div>
        <div class="dc-btns">
          <button class="dc-calc-btn" id="dc-calc-btn">Calculate Duration</button>
          <button class="dc-reset-btn" id="dc-reset-btn">Clear</button>
        </div>
        <div class="dc-results" id="dc-results" style="display:none;">
          <div class="dc-reslabel" id="dc-result-label"></div>
          <div class="dc-units">
            <div class="dc-unit" id="dc-days"></div>
            <div class="dc-unit" id="dc-weeks"></div>
            <div class="dc-unit" id="dc-months"></div>
            <div class="dc-unit" id="dc-years"></div>
          </div>
        </div>
      </div>
    `;

    document.getElementById('CalculatorContainer').innerHTML = html;
  </script>

  <script>
    // Calculator functionality
    (function() {
      function isLeap(year) {
        year = Number(year);
        return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);
      }

      function daysInMonth(m, y) {
        m = Number(m); y = Number(y);
        if (!m || !y) return 31;
        if (m === 2) return isLeap(y) ? 29 : 28;
        if ([4,6,9,11].includes(m)) return 30;
        return 31;
      }

      function fillYears(select) {
        const thisYear = (new Date()).getFullYear();
        for (let y = thisYear - 100; y <= thisYear + 10; y++) {
          let opt = document.createElement('option');
          opt.value = y; 
          opt.textContent = y;
          select.appendChild(opt);
        }
      }

      function fillDays(select, m, y) {
        let prev = select.value;
        select.innerHTML = '<option value="">Day</option>';
        let dmax = daysInMonth(m, y);
        for (let d = 1; d <= dmax; d++) {
          let opt = document.createElement('option');
          opt.value = d; 
          opt.textContent = d;
          select.appendChild(opt);
        }
        if (prev && prev <= dmax) select.value = prev;
      }

      function setupDateRow(row) {
        const mSel = document.getElementById(row + '-month');
        const dSel = document.getElementById(row + '-day');
        const ySel = document.getElementById(row + '-year');
        
        fillDays(dSel);
        fillYears(ySel);
        
        function updateDays() {
          const month = Number(mSel.value);
          const year = Number(ySel.value);
          const dayCount = daysInMonth(month, year);
          
          let prev = dSel.value;
          dSel.innerHTML = '<option value="">Day</option>';
          for (let d = 1; d <= dayCount; d++) {
            let opt = document.createElement('option');
            opt.value = d;
            opt.textContent = d;
            dSel.appendChild(opt);
          }
          
          if (prev && prev <= dayCount) {
            dSel.value = prev;
          }
        }
        
        mSel.addEventListener('change', updateDays);
        ySel.addEventListener('change', updateDays);
      }

      function showError(msg) {
        const er = document.getElementById('dc-error');
        er.style.display = 'block';
        er.textContent = msg;
        document.getElementById('dc-results').style.display = 'none';
      }
      
      function hideError() { 
        document.getElementById('dc-error').style.display = 'none'; 
      }
      
      function clearAll() {
        ['start','end'].forEach(prefix => {
          document.getElementById(`${prefix}-month`).value = '';
          document.getElementById(`${prefix}-day`).innerHTML = '<option value="">Day</option>';
          document.getElementById(`${prefix}-year`).value = '';
        });
        hideError();
        document.getElementById('dc-results').style.display = 'none';
      }

      function isValidDate(y, m, d) {
        if (!y || !m || !d) return false;
        const date = new Date(y, m-1, d);
        return (date.getFullYear() == y && date.getMonth() == m-1 && date.getDate() == Number(d));
      }

      function calculate() {
        hideError();
        const sm = document.getElementById('start-month').value;
        const sd = document.getElementById('start-day').value;
        const sy = document.getElementById('start-year').value;
        const em = document.getElementById('end-month').value;
        const ed = document.getElementById('end-day').value;
        const ey = document.getElementById('end-year').value;

        if (!sm || !sd || !sy || !em || !ed || !ey) {
          showError('Please select all fields for both dates.');
          return;
        }
        if (!isValidDate(sy, sm, sd)) {
          showError('Invalid start date. (e.g. February 29 in a non-leap year, April 31, etc.)');
          return;
        }
        if (!isValidDate(ey, em, ed)) {
          showError('Invalid end date. (e.g. February 29 in a non-leap year, April 31, etc.)');
          return;
        }
        
        const startDate = new Date(sy, sm-1, sd);
        const endDate = new Date(ey, em-1, ed);
        
        if (endDate < startDate) {
          showError('End date must be after start date.');
          return;
        }

        const diffTime = Math.abs(endDate - startDate);
        const diffDays = Math.round(diffTime / (1000 * 60 * 60 * 24));
        const diffWeeks = Math.round((diffDays / 7) * 10) / 10;
        const diffMonths = Math.round((diffDays / 30.44) * 10) / 10;
        const diffYears = Math.round((diffDays / 365.25) * 10) / 10;
        
        const sdf = startDate.toLocaleDateString('en-US', { 
          month: 'long', 
          day: 'numeric', 
          year: 'numeric' 
        });
        
        const edf = endDate.toLocaleDateString('en-US', { 
          month: 'long', 
          day: 'numeric', 
          year: 'numeric' 
        });

        const results = document.getElementById('dc-results');
        results.style.display = 'block';
        document.getElementById('dc-result-label').textContent = `Between ${sdf} and ${edf}`;
        document.getElementById('dc-days').textContent = `${diffDays} day${diffDays !== 1 ? 's' : ''}`;
        document.getElementById('dc-weeks').textContent = `${diffWeeks} week${diffWeeks !== 1 ? 's' : ''}`;
        document.getElementById('dc-months').textContent = `${diffMonths} month${diffMonths !== 1 ? 's' : ''}`;
        document.getElementById('dc-years').textContent = `${diffYears} year${diffYears !== 1 ? 's' : ''}`;
      }

      // Initialize
      setupDateRow('start');
      setupDateRow('end');
      function setDefaultDates() {
  const today = new Date();
  const weekFromNow = new Date(today.getTime() + 7 * 24 * 60 * 60 * 1000);

  // Helper to set selects by prefix (start or end) and a JS Date object
  function setDate(prefix, dateObj) {
    document.getElementById(`${prefix}-year`).value = dateObj.getFullYear();
    document.getElementById(`${prefix}-month`).value = dateObj.getMonth() + 1;
    // Since filling days depends on month/year, wait and then set day:
    setTimeout(() => {
      document.getElementById(`${prefix}-day`).value = dateObj.getDate();
    }, 0); // Run after days drop-down is populated
  }

  setDate('start', today);
  setDate('end', weekFromNow);
}

     setupDateRow('start');
setupDateRow('end');
setDefaultDates();
document.getElementById('dc-calc-btn').addEventListener('click', calculate);
document.getElementById('dc-reset-btn').addEventListener('click', clearAll);
    })();
  </script>
</body>
</html>