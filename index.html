<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Day Calculator</title>
  <style>
    body 
    { 
      background: #f9f6ee; 
      margin: 0; padding: 40px 0; 
      font-family: 'Georgia', serif; 
    }
    #DayCalculatorContainer 
    { 
    max-width: 425px; margin: 0 auto; }
    .dc-card { background: #f9f6ee; border-radius: 12px; box-shadow: 0 2px 12px #0001; padding: 38px 35px 30px; width: 100%; }
    .dc-title { font-size: 2.1rem; color: #553a4d; font-weight: bold; margin-bottom: 30px; letter-spacing: -1px;}
    .dc-label { color: #af6b35; font-weight: 600; font-size: 1.05rem; margin-bottom: 4px; display: block;}
    .dc-daterow { margin-bottom: 16px;}
    .dc-row { display: flex; gap: 11px; margin-bottom: 10px;}
    .dc-dropdown { padding: 9px 8px; border: 1px solid #e6dfd0; border-radius: 4px; font-size: 1.04rem; outline: none; width: 112px; background: #fff; color: #222;}
    .dc-dropdown:focus { border-color: #af6b35;}
    .dc-btns { display: flex; gap: 13px; margin: 18px 0 10px 0;}
    .dc-calc-btn { background: #b43a22; color: #fff; font-weight: bold; font-size: 1.11rem; padding: 12px 0; border: none; border-radius: 6px; width: 54%; cursor: pointer; transition: background 0.15s; }
    .dc-calc-btn:hover { background: #98301e; }
    .dc-reset-btn { background: #dfcda7; color: #885b23; font-weight: bold; font-size: 1.11rem; padding: 12px 0; border: none; border-radius: 6px; width: 46%; cursor: pointer; transition: background 0.15s;}
    .dc-reset-btn:hover { background: #e8e0c5; }
    .dc-error { color: #b43a22; background: #fff5ef; padding: 10px 12px; border-radius: 5px; font-weight: bold; margin-bottom: 11px;}
    .dc-results { background: #fff; padding: 15px 18px 13px; border-radius: 6px; border: 1px solid #eee4c9; margin-top: 10px;}
    .dc-results .dc-reslabel { color: #b43a22; font-weight: bold; margin-bottom: 8px; font-size: 1.09rem;}
    .dc-units { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 9px;}
    .dc-unit { background: #f0ece5; padding: 9px 14px; border-radius: 4px; font-size: .98rem; color: #3a3030;}
    @media (max-width: 500px) {
      .dc-card { padding: 18px 3vw 18px 3vw; }
      .dc-row { flex-direction: column; gap: 6px; }
      .dc-btns { flex-direction: column; gap: 10px; }
      .dc-dropdown { width: 100%; }
      #DayCalculatorContainer { width: 98vw;}
    }
  </style>
</head>
<body>
<div id="DayCalculatorContainer">
  <div class="dc-card">
    <div class="dc-title">Day Calculator</div>
    <div class="dc-daterow">
      <label class="dc-label">Start Date</label>
      <div class="dc-row">
        <select class="dc-dropdown" id="start-month">
          <option value="">Month</option>
          <option value="1">January</option><option value="2">February</option><option value="3">March</option>
          <option value="4">April</option><option value="5">May</option><option value="6">June</option>
          <option value="7">July</option><option value="8">August</option><option value="9">September</option>
          <option value="10">October</option><option value="11">November</option><option value="12">December</option>
        </select>
        <select class="dc-dropdown" id="start-day">
          <option value="">Day</option>
        </select>
        <select class="dc-dropdown" id="start-year">
          <option value="">Year</option>
        </select>
      </div>
    </div>
    <div class="dc-daterow">
      <label class="dc-label">End Date</label>
      <div class="dc-row">
        <select class="dc-dropdown" id="end-month">
          <option value="">Month</option>
          <option value="1">January</option><option value="2">February</option><option value="3">March</option>
          <option value="4">April</option><option value="5">May</option><option value="6">June</option>
          <option value="7">July</option><option value="8">August</option><option value="9">September</option>
          <option value="10">October</option><option value="11">November</option><option value="12">December</option>
        </select>
        <select class="dc-dropdown" id="end-day">
          <option value="">Day</option>
        </select>
        <select class="dc-dropdown" id="end-year">
          <option value="">Year</option>
        </select>
      </div>
    </div>
    <div id="dc-error" class="dc-error" style="display:none;"></div>
    <div class="dc-btns">
      <button class="dc-calc-btn" id="dc-calc-btn">Calculate Duration</button>
      <button class="dc-reset-btn" id="dc-reset-btn">Clear</button>
    </div>
    <div class="dc-results" id="dc-results" style="display:none;">
      <div class="dc-reslabel" id="dc-result-label"></div>
      <div class="dc-units">
        <div class="dc-unit" id="dc-days"></div>
        <div class="dc-unit" id="dc-weeks"></div>
        <div class="dc-unit" id="dc-months"></div>
        <div class="dc-unit" id="dc-years"></div>
      </div>
    </div>
  </div>
</div>

<script>
(function() {
  function isLeap(year) {
    year = Number(year);
    return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);
  }

  function daysInMonth(m, y) {
    m = Number(m); y = Number(y);
    if (!m || !y) return 31; // Default, so all days always available until chosen
    if (m === 2) return isLeap(y) ? 29 : 28;
    if ([4,6,9,11].includes(m)) return 30;
    return 31;
  }

  function fillYears(select) {
    const thisYear = (new Date()).getFullYear();
    for (let y = thisYear - 100; y <= thisYear + 10; y++) {
      let opt = document.createElement('option');
      opt.value = y; opt.textContent = y;
      select.appendChild(opt);
    }
  }

  function fillDays(select, m, y) {
    let prev = select.value;
    select.innerHTML = '<option value="">Day</option>';
    let dmax = daysInMonth(m, y);
    for (let d = 1; d <= dmax; d++) {
      let opt = document.createElement('option');
      opt.value = d; opt.textContent = d;
      select.appendChild(opt);
    }
    if (prev && prev <= dmax) select.value = prev;
  }

  // Bind dynamic day updates on change
  function setupDateRow(row) {
  let mSel = document.getElementById(row + '-month');
  let dSel = document.getElementById(row + '-day');
  let ySel = document.getElementById(row + '-year');
  fillDays(dSel);      // Initially fill 1-31 days
  fillYears(ySel);
  
  function updateDays() {
    // Always show days per month WITHOUT considering year for this step:
    let month = Number(mSel.value);
    let dayCount;
    if (month === 2) {
      dayCount = 29; // Always 29 days for Feb
    } else if ([4,6,9,11].includes(month)) {
      dayCount = 30;
    } else {
      dayCount = 31;
    }
    
    let prev = dSel.value;
    dSel.innerHTML = '<option value="">Day</option>';
    for (let d=1; d<=dayCount; d++) {
      let opt = document.createElement('option');
      opt.value = d;
      opt.textContent = d;
      dSel.appendChild(opt);
    }
    
    if (prev && prev <= dayCount) {
      dSel.value = prev;
    } else {
      dSel.value = '';
    }
  }
  
  mSel.addEventListener('change', updateDays);
  // NOTE: We DO NOT attach updateDays listener on year change, so day dropdown doesn't change when year changes
}

  setupDateRow('start');
  setupDateRow('end');

  function showError(msg) {
    let er = document.getElementById('dc-error');
    er.style.display = '';
    er.textContent = msg;
    document.getElementById('dc-results').style.display = 'none';
  }
  function hideError() { document.getElementById('dc-error').style.display = 'none'; }
  function clearAll() {
    ['start','end'].forEach(prefix => {
      document.getElementById(`${prefix}-month`).value = '';
      fillDays(document.getElementById(`${prefix}-day`));
      document.getElementById(`${prefix}-day`).value = '';
      document.getElementById(`${prefix}-year`).value = '';
    });
    hideError();
    document.getElementById('dc-results').style.display = 'none';
  }

  function isValidDate(y,m,d) {
    if (!y||!m||!d) return false;
    const date = new Date(y, m-1, d);
    return (date.getFullYear() == y && date.getMonth() == m-1 && date.getDate() == Number(d));
  }

  function calculate() {
    hideError();
    let sm = document.getElementById('start-month').value;
    let sd = document.getElementById('start-day').value;
    let sy = document.getElementById('start-year').value;
    let em = document.getElementById('end-month').value;
    let ed = document.getElementById('end-day').value;
    let ey = document.getElementById('end-year').value;

    if (!sm||!sd||!sy||!em||!ed||!ey) {
      showError('Please select all fields for both dates.');
      return;
    }
    if (!isValidDate(sy, sm, sd)) {
      showError('Invalid start date. (e.g. February 29 in a non-leap year, April 31, etc.)');
      return;
    }
    if (!isValidDate(ey, em, ed)) {
      showError('Invalid end date. (e.g. February 29 in a non-leap year, April 31, etc.)');
      return;
    }
    let startDate = new Date(sy, sm-1, sd);
    let endDate = new Date(ey, em-1, ed);
    if (endDate < startDate) {
      showError('End date must be after start date.');
      return;
    }

    const diffTime = endDate - startDate;
    const diffDays = Math.round(diffTime / (1000*60*60*24));
    const diffWeeks = Math.round((diffDays/7)*10)/10;
    const diffMonths = Math.round((diffDays/30.44)*10)/10;
    const diffYears = Math.round((diffDays/365.25)*10)/10;
    const sdf = startDate.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
    const edf = endDate.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });

    document.getElementById('dc-results').style.display = '';
    document.getElementById('dc-result-label').textContent = `Between ${sdf} and ${edf}`;
    document.getElementById('dc-days').textContent = `${diffDays} day${diffDays !== 1 ? 's':''}`;
    document.getElementById('dc-weeks').textContent = `${diffWeeks} week${diffWeeks !== 1 ? 's':''}`;
    document.getElementById('dc-months').textContent = `${diffMonths} month${diffMonths !== 1 ? 's':''}`;
    document.getElementById('dc-years').textContent = `${diffYears} year${diffYears !== 1 ? 's':''}`;
  }

  document.getElementById('dc-calc-btn').onclick = calculate;
  document.getElementById('dc-reset-btn').onclick = clearAll;
})();
</script>
</body>
</html>
